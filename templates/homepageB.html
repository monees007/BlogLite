{% extends "base.html" %}
{% block content %}
    {% for p in data %}
        <div class="post container my-5 py-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-12 col-lg-10 col-xl-8">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex flex-start align-items-center">
                                <img class="rounded-circle shadow-1-strong me-3"
                                     src="{{ p.profile_pic }}"
                                     alt="avatar" width="60"
                                     height="60"/>
                                <div>
                                    <h6 onclick="location.href='/user/{{ p.username }}'"
                                        class="fw-bold text-primary mb-1">{{ p.name }}</h6>
                                    <p class="text-muted small mb-0">
                                        {{ p.username }} - {{ p.date }}
                                    </p>
                                </div>
                            </div>

                            <div class="mt-3 mb-4 pb-2">
                                {{ p.content | markdown }}
                            </div>

                            <div class="col pt-1 float-end d-flex justify-content">
                                <button onclick="like(this,{{ p.id }})"
                                        class="like_btn btn btn-sm d-flex align-items-center me-1">
                                    <span class=" {% if p.liked>0 %} liked {% endif %} like material-symbols-outlined me-2">favorite</span>
                                    <span class="like_count me-2"> {{ p.likes }}</span>
                                    <span class="like_label d-none d-sm-block mb-0">{% if p.likes ==1 %}Like{% else %}
                                        Likes{% endif %}</span>
                                </button>
                                <a onclick="comments_hider(this ,{{ p.id }})"
                                   class="comment_btn btn  btn-sm d-flex align-items-center">
                                    <span class="comment_icon material-symbols-outlined me-2">chat</span>
                                    <span class="comment_count me-1">{{ p.comments }}</span>
                                    <p class="comment_label mb-0 d-none d-sm-block"> Comment</p>
                                </a>
                                <button onclick="repost(this,{{ p.id }})"
                                        class="repost_btn btn btn-sm d-flex align-items-center me-1">

                                    <span class="repost_icon {% if p.shared %}text-primary{% endif %} material-symbols-outlined me-2">google_plus_reshare</span>
                                    <span class="repost_count me-1 likec">{{ p.shares }}</span>

                                </button>
                                <div class="dropdown d-flex align-items-center">
                                    <button class="btn btn-sm " type="button"
                                            id="dropdownMenuButton1"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                        <span class="material-symbols-outlined">more_vert</span>

                                    </button>
                                    <ul class="dropdown-menu"
                                        aria-labelledby="dropdownMenuButton1">
                                        <li>
                                            <div class="dropdown-item" onclick="edit_post()">Edit</div>
                                        </li>
                                        <li>
                                            <div class="dropdown-item" onclick="archive({{ p.id }})">Archive</div>
                                        </li>
                                        <li>
                                            <div class="dropdown-item" onclick="delete_post({{ p.id }})">Delete</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <section style="display: none" class="card-footer py-3" id="commentx">
                            <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
                                <div class="d-flex flex-start w-100">
                                    <img class="rounded-circle shadow-1-strong me-3"
                                         src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar"
                                         width="40"
                                         height="40"/>
                                    <div class="form-outline w-100">
                                        <small>Nice post Architectiure</small>

                                    </div>
                                </div>
                            </div>
                            <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">

                                <div class="d-flex flex-start w-100">
                                    <img class="rounded-circle shadow-1-strong me-3"
                                         src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar"
                                         width="40"
                                         height="40"/>
                                    <div class="form-outline w-100">
                <textarea class="form-control" id="textAreaExample" rows="2"
                          style="background: #fff;"></textarea>
                                    </div>
                                </div>
                                <div class="float-end mt-2 pt-1">
                                    <button type="button" class="btn btn-primary btn-sm">Post comment</button>
                                    <button type="button" class="btn btn-outline-primary btn-sm">Cancel</button>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>

    {% endfor %}
{% endblock %}